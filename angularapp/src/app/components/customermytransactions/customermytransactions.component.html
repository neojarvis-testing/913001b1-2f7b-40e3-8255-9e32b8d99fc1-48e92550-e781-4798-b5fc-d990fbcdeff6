<div class="transactions-container">
    <h2>My Transactions</h2>
    
    <div class="filters-container">
      <div class="filter-group">
        <label for="filterType">Filter by: </label>
        <select id="filterType" [(ngModel)]="filterType" (change)="onFilterChange(filterType)">
          <option value="all">All</option>
          <option value="deposit">Deposit</option>
          <option value="withdrawal">Withdrawal</option>
        </select>
      </div>
      
      <div class="search-group">
        <input type="text" placeholder="Search transactions..." [(ngModel)]="searchTerm" (keyup.enter)="onSearch()">
        <button class="search-btn" (click)="onSearch()">Search</button>
      </div>
    </div>
    
    <div *ngIf="loading" class="loading">
      <p>Loading transactions...</p>
    </div>
    
    <div *ngIf="error" class="error-message">
      <p>{{ error }}</p>
    </div>
    
    <div *ngIf="!loading && !error">
      <div *ngIf="filteredTransactions.length === 0" class="no-records">
        <p>Oops! No records Found</p>
      </div>
      
      <table *ngIf="filteredTransactions.length > 0" class="transactions-table">
        <thead>
          <tr>
            <th>Transaction ID</th>
            <th>Date</th>
            <th>Type</th>
            <th>Amount</th>
            <th>Status</th>
            <th>Description</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let transaction of filteredTransactions">
            <td>{{ transaction.TransactionId }}</td>
            <td>{{ formatDate(transaction.TransactionDate) }}</td>
            <td>{{ transaction.TransactionType }}</td>
            <td>₹{{ transaction.Amount.toFixed(2) }}</td>
            <td [class]="getStatusClass(transaction.Status)">{{ transaction.Status }}</td>
            <td>{{ transaction.Description || 'No description' }}</td>
            <td>
              <button class="btn-show-account" (click)="showAccount(transaction)">Show Account</button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
   
    <!-- Account Details Modal -->
    <div *ngIf="showAccountModal" class="modal">
      <div class="modal-content">
        <span class="close" (click)="closeAccountModal()">&times;</span>
        <h3>Account Details</h3>
        <div *ngIf="selectedAccount" class="account-details">
          <p><strong>Account ID:</strong> {{ selectedAccount.AccountId }}</p>
          <p><strong>Account Holder:</strong> {{ selectedAccount.AccountHolderName }}</p>
          <p><strong>Account Type:</strong> {{ selectedAccount.AccountType }}</p>
          <p><strong>Balance:</strong> ₹{{ selectedAccount.Balance.toFixed(2) }}</p>
          <p><strong>Status:</strong> {{ selectedAccount.Status }}</p>
          <p><strong>Created On:</strong> {{ formatDate(selectedAccount.DateCreated || '') }}</p>
          <p><strong>Last Updated:</strong> {{ formatDate(selectedAccount.LastUpdated || '') }}</p>
        </div>
        <div class="modal-footer">
          <button class="btn-close" (click)="closeAccountModal()">Close</button>
        </div>
      </div>
    </div>
  </div>