<div class="transaction-container">
  <h2>All Transactions</h2>
  
  <table>
    <thead>
      <tr>
        <th>Transaction ID</th>
        <th>Account ID</th>
        <th>Date</th>
        <th>Type</th>
        <th>Amount</th>
        <th>Status</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let transaction of transactions">
        <td>{{ transaction.transactionId }}</td>
        <td>{{ transaction.accountId }}</td>
        <td>{{ transaction.transactionDate | date }}</td>
        <td>{{ transaction.transactionType }}</td>
        <td>{{ transaction.amount | currency }}</td>
        <td>{{ transaction.status }}</td>
        <td>
          <ng-container *ngIf="transaction.status !== 'Completed'; else noActionTemplate">
            <button class="btn btn-info" (click)="showAccountDetails(transaction.account)">Show Account</button>
            <button class="btn btn-success" (click)="openModal(transaction)">Proceed</button>
            <button class="btn btn-danger" (click)="rejectTransaction(transaction)">Reject</button>
          </ng-container>
          <ng-template #noActionTemplate>
            <span>No action required</span>
          </ng-template>
        </td>
      </tr>
    </tbody>
  </table>
</div>

<!-- Account Details Popup -->
<div class="modal-overlay" [class.show]="showPopup">
  <div class="modal-content">
    <h3>Account Details</h3>
    <p><strong>Account Holder:</strong> {{ selectedAccount?.accountHolderName }}</p>
    <p><strong>Account Type:</strong> {{ selectedAccount?.accountType }}</p>
    <p><strong>Balance:</strong> {{ selectedAccount?.balance | currency }}</p>
    <p><strong>Status:</strong> {{ selectedAccount?.status }}</p>
    <button class="btn btn-secondary" (click)="closePopup()">Close</button>
  </div>
</div>

<!-- Confirmation Modal for Manager Approval -->
<div class="modal-overlay" [class.show]="isModalOpen">
  <div class="modal-content">
    <h3>Transaction Approval</h3>
    <p>Do you want to approve this transaction?</p>
    <div class="modal-buttons">
      <button class="btn btn-primary" (click)="confirmTransaction()">Approve</button>
      <button class="btn btn-danger" (click)="closeModal()">Cancel</button>
    </div>
  </div>
</div>
