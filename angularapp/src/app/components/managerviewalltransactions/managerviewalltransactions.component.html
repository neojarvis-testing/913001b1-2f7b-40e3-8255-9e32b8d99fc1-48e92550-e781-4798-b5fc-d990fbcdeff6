<div class="transaction-container">
  <h2>All Transactions</h2>
  <table>
    <thead>
      <tr>
        <th>Transaction ID</th>
        <th>Account ID</th>
        <th>Date</th>
        <th>Type</th>
        <th>Amount</th>
        <th>Status</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let transaction of transactions">
        <td>{{ transaction.transactionId }}</td>
        <td>{{ transaction.accountId }}</td>
        <td>{{ transaction.transactionDate | date }}</td>
        <td>{{ transaction.transactionType }}</td>
        <td>{{ transaction.amount | currency }}</td>
        <td>{{ transaction.status }}</td>
        <td>
          <!-- Only show actions if the transaction is NOT completed -->
          <ng-container *ngIf="transaction.status !== 'Completed'; else noActionTemplate">
            <button (click)="showAccountDetails(transaction.account)">Show Account</button>
            <button (click)="proceedTransaction(transaction)">Proceed</button>
            <button (click)="rejectTransaction(transaction)">Reject</button>
          </ng-container>
          <!-- If transaction is completed, show "No action required" -->
          <ng-template #noActionTemplate>
            <span>No action required</span>
          </ng-template>
        </td>
      </tr>
    </tbody>
  </table>
</div>

<!-- Account Details Popup -->
<div class="popup" *ngIf="showPopup">
  <div class="popup-content">
    <h3>Account Details</h3>
    <p><strong>Account Holder:</strong> {{ selectedAccount?.accountHolderName }}</p>
    <p><strong>Account Type:</strong> {{ selectedAccount?.accountType }}</p>
    <p><strong>Balance:</strong> {{ selectedAccount?.balance | currency }}</p>
    <p><strong>Status:</strong> {{ selectedAccount?.status }}</p>
    <button (click)="closePopup()">Close</button>
  </div>
</div>
